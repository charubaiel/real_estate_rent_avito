# real_estate_avito
## Описание : 
Проектик для использования и тестирования технологий биг ~~и не очень~~ даты

* ETL - dagster  
  * Повольно универсальная и "питонячая" DAG платформа
  * Позволяет дешево строить довольно гибкие дата пайплайны
* BD - duckdb
    * Колоночная бдшка с классной итеграцией по форматам и технологиям
    * Нативная поддержка 
        * .csv
        * .parquet
        * других бд (sqlite,postgres)
* DM  - Poetry 
    * Удобный и гибкий медеджер зависимостей
* Docker - docker epta
    * Инструмент виртуализации окружения
    * Гарантируем воспроизведения среды разработки на любой консервной банке
* Selenium
    * Эмуляция браузера для сбора открытых данных
* Geopy - Либа для получения координат местности и мелких подсчетов по географии
* OSMnx - Либа для работы с массивом карты как с графом
* NetworkX - Либа для выполнения действий с графами
    * Нахождение кратчайшего пути и тд
    * Оценка связанности
    * Длинна графа 
    * и тд


## Состав
### **/data**
Cодержит собранные данные по категориям недвижки  
DB - `RE_moscow_db`  
1) builder_df - Застройщки
1) user_df - Вторичка
1) agency_df - Агенства
1) home_info - Подробные данные по домофонду Москвы

DB - `general_moscow_home_info`  
1) home_base_info - Подробные данные по домофонду Москвы (73 параметра дома)


#### Параметры
```
0	datetime - время сбора (datetime)
1	publish_delta - дельта публикации от времени сбора (текст)
2	id - id объявления
3	url - url объявления
4	text - тект превью объявления
5	price - цена
6	JK - наличие ЖК (в основном у застройщиков)
7	metro_dist - расстояние до метро
8	metro - название метро
9	metro_branch - цвет ветки метро
10	street - название улицы
11	is_new - является ли новостройкой ( прокси от JK)
12	n_rooms - кол-во комнат
13	m2 - метраж квартиры
14	floor - этаж квартиры
15	max_floor - этажность дома
16	rubm2 - цена квадратного метра 
```

### **/notebooks**
Примеры использования данных и технодемки итоговых скриптов  
1) selenium_test - использование headless seleniuma для не агрессивного парсинга
1) examples - примеры получения данных
1) geofeatures - перимеры работы с геоданными ( время в пути, карты, построение маршрутов)
### **/repositories**
Файлы и функции нашего DAG пайплайнера\шедулера
## Запуск добора данных
### Параметризация:
+ либо .env файлик в корне проекта
+ либо переменные окружения с соответствующими именами из compsoe.yml
### Запуск
``` shell 
docker compose up -d
```
Запуск процессов в графическом интерфейсе на локал хосте и указанном порте